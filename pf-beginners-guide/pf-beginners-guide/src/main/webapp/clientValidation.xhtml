<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html">
	<h:head>
	<script type="text/javascript">

		function validateEmail() 
		{
			var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
			var email = $.trim($(PrimeFaces.escapeClientId("userForm:email")).val());
			if(email ==''){
				$(PrimeFaces.escapeClientId("userForm:emailMsg")).text("");
				$(PrimeFaces.escapeClientId("userForm:emailMsg")).attr("class", "");
				return;
			}
			if( emailReg.test( email ) ) {
			   //$(PrimeFaces.escapeClientId("userForm:emailMsg")).text("Valid Email");		
			   $("#userForm\\:emailMsg").text("Valid Mail");
			   $(PrimeFaces.escapeClientId("userForm:emailMsg")).attr("class", "ui-messages-info ui-widget ui-corner-all ui-messages-info-summary");		   
			} else {
				$(PrimeFaces.escapeClientId("userForm:emailMsg")).text("Invalid Email");
				$(PrimeFaces.escapeClientId("userForm:emailMsg")).attr("class", "ui-message-error ui-widget ui-corner-all ui-message-error-detail");
		   }
		}

		</script>
	
		<title>Registration</title>
		
	</h:head>
	<h:body>
		<h:form id="userForm">
			<h2>Performing client side validations</h2>
			<p>When the email is changed client side validation is performed
				and adds error/info messages</p>
			<p:panel header="User Form">
				<p:messages />
				<h:panelGrid columns="3">
					<p:outputLabel value="Email:" />
					<p:inputText id="email"
						value="#{userController.registrationUser.email}"
						onchange="validateEmail();" />
					<p:message id="emailMsg" for="email" />
				</h:panelGrid>
			</p:panel>
		</h:form>
	</h:body>
</f:view>
</html>